{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useContext, createContext } from \"react\";\nimport { httpClient } from \"./Api\";\nimport { Cookies } from \"react-cookie\";\nvar authContext = /*#__PURE__*/createContext({});\n\n// Provider component that wraps app and makes auth object ..\n// ... available to any child component that calls useAuth().\n\nexport function AuthProvider(_ref) {\n  _s();\n  var children = _ref.children;\n  var auth = useProvideAuth();\n  return __jsx(authContext.Provider, {\n    value: auth\n  }, children);\n}\n\n// Hook for child components to get the auth object ...\n// ... and re-render when it changes.\n_s(AuthProvider, \"XNU4Jn8u4aVzJknlKOHFJq03xMo=\", false, function () {\n  return [useProvideAuth];\n});\n_c = AuthProvider;\nexport var useAuth = function useAuth() {\n  _s2();\n  return useContext(authContext);\n};\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar useProvideAuth = function useProvideAuth() {\n  _s3();\n  var _useState = useState(null),\n    authUser = _useState[0],\n    setAuthUser = _useState[1];\n  var _useState2 = useState(true),\n    isLoadingUser = _useState2[0],\n    setLoadingUser = _useState2[1];\n  var _useState3 = useState(false),\n    isLoading = _useState3[0],\n    setLoading = _useState3[1];\n  var _useState4 = useState(''),\n    error = _useState4[0],\n    setError = _useState4[1];\n  var fetchStart = function fetchStart() {\n    setLoading(true);\n    setError('');\n  };\n  var fetchSuccess = function fetchSuccess() {\n    setLoading(false);\n    setError('');\n  };\n  var fetchError = function fetchError(error) {\n    setLoading(false);\n    setError(error);\n  };\n  var userLogin = function userLogin(data, callbackFun) {\n    fetchStart();\n    httpClient.post('auth/login', data).then(function (_ref2) {\n      var data = _ref2.data;\n      if (data.result) {\n        fetchSuccess();\n        httpClient.defaults.headers.common['Authorization'] = 'Bearer ' + data.token.access_token;\n        var cookies = new Cookies();\n        cookies.set('token', data.token.access_token);\n        getAuthUser();\n        if (callbackFun) callbackFun();\n      } else {\n        fetchError(data.error);\n      }\n    })[\"catch\"](function (error) {\n      fetchError(error.message);\n    });\n  };\n  var userSignup = function userSignup(data, callbackFun) {\n    fetchStart();\n    httpClient.post('auth/register', data).then(function (_ref3) {\n      var data = _ref3.data;\n      if (data.result) {\n        fetchSuccess();\n        httpClient.defaults.headers.common['Authorization'] = 'Bearer ' + data.token.access_token;\n        var cookies = new Cookies();\n        cookies.set('token', data.token.access_token);\n        if (callbackFun) callbackFun();\n      } else {\n        fetchError(data.error);\n      }\n    })[\"catch\"](function (error) {\n      fetchError(error.message);\n    });\n  };\n  var userSignOut = function userSignOut(callbackFun) {\n    fetchStart();\n    httpClient.post('auth/logout').then(function (_ref4) {\n      var data = _ref4.data;\n      if (data.result) {\n        fetchSuccess();\n        setAuthUser(false);\n        httpClient.defaults.headers.common['Authorization'] = '';\n        var cookies = new Cookies();\n        cookies.remove('token');\n        if (callbackFun) callbackFun();\n      } else {\n        fetchError(data.error);\n      }\n    })[\"catch\"](function (error) {\n      fetchError(error.message);\n    });\n  };\n  var getAuthUser = function getAuthUser() {\n    fetchStart();\n    httpClient.post(\"auth/me\").then(function (_ref5) {\n      var data = _ref5.data;\n      if (data.user) {\n        fetchSuccess();\n        setAuthUser(data.user);\n      } else {\n        fetchError(data.error);\n      }\n    })[\"catch\"](function (error) {\n      httpClient.defaults.headers.common['Authorization'] = '';\n      fetchError(error.message);\n    });\n  };\n\n  // Subscribe to user on mount\n  // Because this sets state in the callback it will cause any ...\n  // ... component that utilizes this hook to re-render with the ...\n  // ... latest auth object.\n\n  useEffect(function () {\n    var cookies = new Cookies();\n    var token = cookies.get(\"token\");\n    httpClient.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n    httpClient.post(\"auth/me\").then(function (_ref6) {\n      var data = _ref6.data;\n      if (data.user) {\n        setAuthUser(data.user);\n      }\n      setLoadingUser(false);\n    })[\"catch\"](function (error) {\n      cookies.remove('token');\n      httpClient.defaults.headers.common['Authorization'] = '';\n      setLoadingUser(false);\n    });\n  }, []);\n\n  // Return the user object and auth methods\n  return {\n    isLoadingUser: isLoadingUser,\n    isLoading: isLoading,\n    authUser: authUser,\n    error: error,\n    setAuthUser: setAuthUser,\n    getAuthUser: getAuthUser,\n    userLogin: userLogin,\n    userSignup: userSignup,\n    userSignOut: userSignOut\n  };\n};\n_s3(useProvideAuth, \"661ftY5PjkpjamoRde4e7mP5Gco=\");\nexport var isUnRestrictedRoute = function isUnRestrictedRoute(pathname) {\n  return pathname === '/signin' || pathname === '/signup' || pathname === '/forgot-password' || pathname === '/reset-password';\n};\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","useState","useEffect","useContext","createContext","httpClient","Cookies","authContext","AuthProvider","_ref","_s","children","auth","useProvideAuth","__jsx","Provider","value","_c","useAuth","_s2","_s3","_useState","authUser","setAuthUser","_useState2","isLoadingUser","setLoadingUser","_useState3","isLoading","setLoading","_useState4","error","setError","fetchStart","fetchSuccess","fetchError","userLogin","data","callbackFun","post","then","_ref2","result","defaults","headers","common","token","access_token","cookies","set","getAuthUser","message","userSignup","_ref3","userSignOut","_ref4","remove","_ref5","user","get","_ref6","isUnRestrictedRoute","pathname","$RefreshReg$"],"sources":["/home/novel/Desktop/medcario/lms/lms_admin/db-sl-admin/util/use-auth.js"],"sourcesContent":["import React, {useState, useEffect, useContext, createContext} from \"react\";\nimport {httpClient} from \"./Api\";\nimport {Cookies} from \"react-cookie\";\n\nconst authContext = createContext({});\n\n// Provider component that wraps app and makes auth object ..\n// ... available to any child component that calls useAuth().\n\nexport function AuthProvider({children}) {\n  const auth = useProvideAuth();\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\n}\n\n// Hook for child components to get the auth object ...\n// ... and re-render when it changes.\n\nexport const useAuth = () => {\n  return useContext(authContext);\n};\n\nconst useProvideAuth = () => {\n  const [authUser, setAuthUser] = useState(null);\n  const [isLoadingUser, setLoadingUser] = useState(true);\n  const [isLoading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const fetchStart = () => {\n    setLoading(true);\n    setError('');\n  }\n\n  const fetchSuccess = () => {\n    setLoading(false);\n    setError('');\n  }\n\n  const fetchError = (error) => {\n    setLoading(false);\n    setError(error);\n  }\n\n  const userLogin = (data, callbackFun) => {\n    fetchStart();\n    httpClient.post('auth/login', data)\n      .then(({data}) => {\n        if (data.result) {\n          fetchSuccess();\n          httpClient.defaults.headers.common['Authorization'] = 'Bearer ' + data.token.access_token;\n          const cookies = new Cookies();\n          cookies.set('token', data.token.access_token);\n          getAuthUser();\n          if (callbackFun) callbackFun();\n        } else {\n          fetchError(data.error);\n        }\n      })\n      .catch(function (error) {\n        fetchError(error.message);\n      });\n  };\n\n  const userSignup = (data, callbackFun) => {\n    fetchStart();\n    httpClient.post('auth/register', data)\n      .then(({data}) => {\n        if (data.result) {\n          fetchSuccess();\n          httpClient.defaults.headers.common['Authorization'] = 'Bearer ' + data.token.access_token;\n          const cookies = new Cookies();\n          cookies.set('token', data.token.access_token);\n          if (callbackFun) callbackFun();\n        } else {\n          fetchError(data.error);\n        }\n      })\n      .catch(function (error) {\n        fetchError(error.message);\n      });\n  };\n\n  const userSignOut = (callbackFun) => {\n    fetchStart();\n    httpClient.post('auth/logout')\n      .then(({data}) => {\n        if (data.result) {\n          fetchSuccess();\n          setAuthUser(false);\n          httpClient.defaults.headers.common['Authorization'] = '';\n          const cookies = new Cookies();\n          cookies.remove('token');\n          if (callbackFun) callbackFun();\n        } else {\n          fetchError(data.error);\n        }\n      })\n      .catch(function (error) {\n        fetchError(error.message);\n      });\n  };\n\n  const getAuthUser = () => {\n    fetchStart();\n    httpClient.post(\"auth/me\").then(({data}) => {\n      if (data.user) {\n        fetchSuccess();\n        setAuthUser(data.user);\n      } else {\n        fetchError(data.error);\n      }\n    }).catch(function (error) {\n      httpClient.defaults.headers.common['Authorization'] = '';\n      fetchError(error.message);\n    });\n  }\n\n  // Subscribe to user on mount\n  // Because this sets state in the callback it will cause any ...\n  // ... component that utilizes this hook to re-render with the ...\n  // ... latest auth object.\n\n  useEffect(() => {\n      const cookies = new Cookies();\n      const token = cookies.get(\"token\");\n      httpClient.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n\n    \n      httpClient.post(\"auth/me\").then(({data}) => {\n        if (data.user) {\n          setAuthUser(data.user);\n        }\n        setLoadingUser(false);\n      }).catch(function (error) {\n        cookies.remove('token');\n        httpClient.defaults.headers.common['Authorization'] = '';\n        setLoadingUser(false);\n      });\n    }, []\n  );\n\n  // Return the user object and auth methods\n  return {\n    isLoadingUser,\n    isLoading,\n    authUser,\n    error,\n    setAuthUser,\n    getAuthUser,\n    userLogin,\n    userSignup,\n    userSignOut,\n  };\n}\n\nexport const isUnRestrictedRoute = (pathname) => {\n  return pathname === '/signin' || pathname === '/signup' || pathname === '/forgot-password' || pathname === '/reset-password';\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}